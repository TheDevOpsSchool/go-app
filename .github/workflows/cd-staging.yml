name: push to staging environment
on: 
  push:
    branches: [ "staging" ]
  pull_request: 
    branches: ["staging" ]
jobs: 
  pull-app:
    runs-on: ubuntu-latest
    steps: 
    - name: checkout code
      uses: actions/checkout@v2       
        
    - name: setup aws credentials so we can pull the app from s3 bucket
      uses: appleboy/ssh-action@master
      with:
        host: ${{ secrets.IP }}
        username: ${{ secrets.USER }}
        key: ${{ secrets.KEY_SSH }}        
        script: script.sh
