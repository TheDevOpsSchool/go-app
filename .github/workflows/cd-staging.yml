name: push to staging environment
on: 
  push:
    branches: [ "staging" ]
  pull_request: 
    branches: ["staging" ]
jobs: 
  pull-app:
    runs-on: ubuntu-latest
    steps: 
    - name: checkout code
      uses: actions/checkout@v2       
        
    - name: setup aws credentials so we can pull the app from s3 bucket
      run: |
        cd .github/workflows
        chmod 400 ./id_rsa
        ssh -i ./id_rsa ${{secrets.USER}}@${{secrets.IP}} -y sh ./script.sh
      
